<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Zoom Auto Join</title>
  <script src="https://source.zoom.us/2.17.0/lib/vendor/react.min.js"></script>
  <script src="https://source.zoom.us/2.17.0/lib/vendor/react-dom.min.js"></script>
  <script src="https://source.zoom.us/2.17.0/lib/vendor/redux.min.js"></script>
  <script src="https://source.zoom.us/2.17.0/lib/vendor/redux-thunk.min.js"></script>
  <script src="https://source.zoom.us/2.17.0/lib/vendor/lodash.min.js"></script>
  <script src="https://source.zoom.us/zoom-meeting-2.17.0.min.js"></script>
  <style>
    body { text-align: center; font-family: Arial; margin-top: 50px; }
  </style>
</head>
<body>
  <h2>Auto Joining Zoom Meeting...</h2>

  <script>
    // Meeting Config
    const meetConfig = {
      apiKey: "RkocqUjSRhGLyDTbxwu0bQ",   // তোমার Client ID
      meetingNumber: "83620207149",      // তোমার Meeting ID
      userName: "Auto User",
      passWord: "Bdm2Hm",                // তোমার Password
      leaveUrl: "https://zoom.us",
      role: 0 // 0 = attendee, 1 = host
    };

    // Signature আনতে হবে backend থেকে
    fetch("https://zoomwebsdkapp-qon0.onrender.com/signature", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        meetingNumber: meetConfig.meetingNumber,
        role: meetConfig.role
      })
    })
    .then(res => res.json())
    .then(response => {
      startMeeting(response.signature);
    })
    .catch(err => console.error("Signature error", err));

    // Zoom Meeting Start
    function startMeeting(signature) {
      ZoomMtg.setZoomJSLib("https://source.zoom.us/2.17.0/lib", "/av");
      ZoomMtg.preLoadWasm();
      ZoomMtg.prepareJssdk();

      ZoomMtg.init({
        leaveUrl: meetConfig.leaveUrl,
        success: function () {
          ZoomMtg.join({
            signature: signature,
            sdkKey: meetConfig.apiKey,
            meetingNumber: meetConfig.meetingNumber,
            userName: meetConfig.userName,
            passWord: meetConfig.passWord,
            success: (res) => {
              console.log("Join success", res);
            },
            error: (err) => {
              console.error("Join error", err);
            }
          });
        },
        error: function (err) {
          console.error("Init error", err);
        }
      });
    }
  </script>
</body>
</html>
